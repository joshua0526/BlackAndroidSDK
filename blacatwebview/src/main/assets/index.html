<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
	<meta name=”viewport” content=”width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no”/>
    <title>BlackCat SDK</title>

    <link rel="stylesheet" href="res/css/panel.css" type="text/css" />
	

    <script src="lib/rollup/aes.js"></script>
    <script src="lib/component/aes.js"></script>
    <script src="lib/component/mode-ecb.js"></script>
    <script src="lib/component/pad-nopadding.js"></script>
    <script src="lib/scrypt.js"></script>
    <script src="lib/jsrsasign.js"></script>
    <script src="lib/neo-ts.js"></script>
    <script src="lib/qr-code-with-logo.browser.min.js"></script>
    <script src="lib/code.js"></script>

</head>

<body style="background-color:rgba(255,255,255,0);">

    <script>
        var returnMessage = function(data){
            alert(data);
            AndroidSDK.callback(data);
        }			

        // BlaCatSDK("initSDK", "[1000063,111,cn]");
        // BlaCatSDK("setDefaultNetType", "[2]");
        // BlaCatSDK("LoginSDK");

        function BlaCatSDK(method, list=null){
            alert(list);
			if (list){
				var alist = [];      
                list = list.substring(list.indexOf("[") + 1, list.lastIndexOf("]"));
                if (list.indexOf("[") < 0) {
                    alist = list.split(",");				    
                }else{
                    alist[0] = list.substring(list.indexOf("["), list.lastIndexOf("]") + 1);
                    list = list.substring(list.lastIndexOf("]") + 2);
                    list = list.split(",");
                    for (let i = 0; i < list.length; i++){
                        alist[i+1] = list[i];
                    }                  
                }
                list = alist;
            }
            
            switch(method){
                case "initSDK"://初始化方法			
                    //alert(typeof(list[0]) + " " + typeof(list[1]) + " " + typeof(list[2]));		
                    BlackCat.SDK.init(list[0],list[1], returnMessage,list[2]);
                    BlackCat.SDK.showMain();
                break;
                case "Language"://语言修改
                    BlackCat.SDK.setLang(list[0]);
                break;
                case "LoginSDK"://登陆
                    BlackCat.SDK.login();
					BlackCat.SDK.showMain();
                break;
                case "makeRecharge"://发起充值
                    var params = {count:list[0],extString:list[1]};
                    BlackCat.SDK.makeRecharge(params);
                break;
                case "confirmAppNotify"://确认收到
                    var params = {txid:list[0]}
                    BlackCat.SDK.confirmAppNotify(params);
                break;
                case "getBalance":
                    BlackCat.SDK.getBalance();
                break;
                case "getUserInfo":
                    BlackCat.SDK.getUserInfo();
                break;
                case "getNetType":
                    BlackCat.SDK.getNetType();
                break;
                case "makeGasTransfer":
                    var params = {
                        toaddr:list[0],
                        count:list[1],
                        extString:list[2]
                    }
                    BlackCat.SDK.makeGasTransfer(params);
                break;
                case "makeGasTransferMulti":
                    var params = [];
                    for(let i = 0; i < list.length; i++){
                        var p = {};
                        p["toaddr"] = list[i][0];
                        p["count"] = list[i][1];
                        p["extString"] = list[i][2];
                        params.add(p);
                    }
                    BlackCat.SDK.makeGasTransferMulti(params);
                break;
                case "invokeScript"://合约预调用
                    var params = {                        
                        sbParamJson:list[0],
                        sbPushString:list[1],
                        nnc:list[2],
                        extString:list[3]
                    }
                    BlackCat.SDK.invokescript(params);
                break;
                case "makeRawTransaction":
                    var params = {
                        sbParamJson:list[0],
                        sbPushString:list[1],
                        nnc:list[2],
                        extString:list[3]
                    }
                    BlackCat.SDK.makeRawTransaction(params);
                break;
                case "setDefaultNetType":
                    BlackCat.SDK.setDefaultNetType(parseInt(list[0]));
                    BlackCat.SDK.showMain();
                break;
                default:
                    BlackCat.SDK.showMain();
                break;
            }
        }        
    </script>
</body>

</html>